{"title":"Stencil Blog - Einführung in StencilJS","date":"19. April 2020","url":"/blog/einfuehrung-stenciljs","author":"Christian Binzer","twitter":"chbinzer","description":"In diesem Blog-Artikel möchte ich euch eine kurze Einführung in StencilJS geben. Dazu schauen wir uns die Definition von StencilJS an und erstellen eine einfache Alert-Komponente.","img":"/assets/img/blog/posts/einfuehrung-stenciljs/stenciljs-logo.png","srcPath":"./src/blog/einfuehrung-stenciljs.md","hypertext":["div",null,["p",null,["img",{"src":"/assets/img/blog/posts/einfuehrung-stenciljs/stenciljs-logo.png","alt":"Einfuehrung in StencilJS"}]],"\n",["p",null,"Schaut man sich heutzutage den Markt der Frontend JavaScript Frameworks an, dann sieht man ganz klar, dass sich drei Frameworks etabliert haben: ",["a",{"href":"https://reactjs.org/","target":"_blank"},"React"],", ",["a",{"href":"https://angular.io/","target":"_blank"},"Angular"]," und ",["a",{"href":"https://vuejs.org/","target":"_blank"},"Vue.js"],". Meiner Meinung nach ist es heute nur noch eine Geschmackssache, welches Framework man für sein Projekt wählt, denn alle verfolgen den selben Komponenten basierten Ansatz."],"\n",["p",null,"Besonders in großen Unternehmen kann man beobachten, dass jedes Team seinen Favoriten hat und dass immer wieder dieselben Komponenten, wie Buttons, Listen, Inputs etc., neu implementiert werden. Die Wiederverwendbarkeit bleibt also auf der Strecke."],"\n",["p",null,"Dieses Problem hatten auch die Entwickler des ",["a",{"href":"https://ionicframework.com/","target":"_blank"},"Ionic-Frameworks"],". Die ursprünglich auf Angular basierten Komponenten sollten zukünftig auch in anderen Frameworks verwendbar sein. Um das Vorhaben zu realisieren hat sich das Team entschlossen die Ionic-Komponenten in Web Components umzuschreiben. Web Components werden heutzutage von jedem modernen Browser unterstützt und können somit auch Framework unabhängig verwendet werden."],"\n",["p",null,"Bei der Portierung hat das Team gemerkt, dass die Entwicklung mit den vom Browser zur Verfügung stehenden Low-Level-APIs nicht gerade innovativ ist. Aus diesem Grund ist ",["a",{"href":"https://stenciljs.com/","target":"_blank"},"StencilJS"]," entstanden. StencilJS bringt nämlich die besten Innovationen aus den bekannten Frameworks in die Web Components Welt."],"\n",["p",null,"In diesem Blog-Artikel möchte ich euch eine kurze Einführung in StencilJS geben. Dazu schauen wir uns die Definition von StencilJS an und erstellen eine einfache Alert-Komponente."],"\n",["h2",{"id":"was-ist-stenciljs"},"Was ist StencilJS?"],"\n",["p",null,"StencilJS ist kein Framework, sondern ein Compiler mit dem Web Components erstellt werden können. Stencil benötigt also keine eigene Runtime, wie z.B. Angular oder React, um die Komponenten auflösen zu können, sondern generiert standardkonforme Web Components, die der Browser ohne weitere Hilfsmittel verarbeiten kann. Das hat den Vorteil, dass am Ende die Komponenten Framework-agnostisch sind. Außerdem muss kein zusätzlicher Framework Code mitgeschleppt werden, was die Bundles der Endanwendung kleiner macht."],"\n",["p",null,"Stencil kombiniert die besten Techniken der etablierten Frameworks wie Virtual DOM, asynchrones Rendern, reaktives data-binding, ",["a",{"href":"https://www.typescriptlang.org/","target":"_blank"},"TypeScript"]," und JSX. Diese Techniken erlauben eine schnellere und einfachere Erstellung von Web Components. Außerdem bringt der Compiler einen minimalistischen DEV-Server mit, welcher uns z.B. ein Live-Reloading beim Entwickeln bietet und somit die Developer Experience verbessert."],"\n",["h2",{"id":"projekt-setup"},"Projekt-Setup"],"\n",["p",null,"Um ein StencilJS-Projekt erstellen zu können, benötigen wir die letzte LTS Version von ",["a",{"href":"https://nodejs.org/","target":"_blank"},"Node.js"]," (12.x) und npm (6.x). Mit einem für Stencil zur Verfügung stehenden npm init Skript kann ein neues Projekt angelegt werden:"],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-shell%20script"},["code",{"class":"language-shell%20script"},"npm init stencil"]],"\n  "],"\n  ",["p",null,"Nach dem Ausführen des Skripts erhält man eine Eingabeaufforderung, wo man die Möglichkeit hat die Art des Projekts zu wählen. Mit Stencil kann man nicht nur eigenständige Komponenten bauen, sondern auch vollwertige Apps:"],"\n",["p",null,["img",{"src":"/assets/img/blog/posts/einfuehrung-stenciljs/npm-init-stencil.png","alt":"npm init stencil"}]],"\n",["p",null,"Für unser Beispiel wählen wir die component-Variante und vergeben daraufhin einen passenden Projektnamen."],"\n",["p",null,"Im Root-Verzeichnis unseres neu erstellten Projekts, können wir jetzt mit dem folgenden Aufruf den Development-Server starten:"],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-shell%20script"},["code",{"class":"language-shell%20script"},"npm run start"]],"\n  "],"\n  ",["p",null,"Daraufhin sollten wir eine von StencilJS vorgenerierte Komponente im Browser unter der Adresse ",["a",{"href":"http://localhost:3333/"},"http://localhost:3333/"]," angezeigt bekommen:"],"\n",["p",null,["img",{"src":"/assets/img/blog/posts/einfuehrung-stenciljs/browser-localhost.png","alt":"Browser localhost"}]],"\n",["h2",{"id":"stenciljs-am-beispiel-einer-simplen-alert-komponente"},"StencilJS am Beispiel einer simplen Alert-Komponente"],"\n",["p",null,"StencilJS ist ein in TypeScript geschriebener Compiler. Eine Komponente wird, wie auch in Angular, mit einer TypeScript-Klasse in Kombination mit einem ",["code",null,"@Component"],"-Decorator definiert. Der Unterschied zu Angular ist, dass auf keine eigene Templating-Engine gesetzt wird, sondern auf das von React bekannte JSX. Genauso wie in React, gibt es keine Trennung zwischen dem TypeScript-Code und dem Markup, denn das JSX wird in der ",["code",null,"render"],"-Methode der Klasse generiert."],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token punctuation"},"{"]," Component",["span",{"class":"token punctuation"},","]," ComponentInterface",["span",{"class":"token punctuation"},","]," h ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"'@stencil/core'"],["span",{"class":"token punctuation"},";"],"\n\n@",["span",{"class":"token function"},"Component"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},"{"],"\n  tag",["span",{"class":"token punctuation"},":"]," ",["span",{"class":"token string"},"'cb-alert'"],["span",{"class":"token punctuation"},","],"\n  styleUrl",["span",{"class":"token punctuation"},":"]," ",["span",{"class":"token string"},"'./alert.component.css'"],"\n",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},")"],"\n",["span",{"class":"token keyword"},"export"]," ",["span",{"class":"token keyword"},"class"]," ",["span",{"class":"token class-name"},"AlertComponent"]," ",["span",{"class":"token keyword"},"implements"]," ",["span",{"class":"token class-name"},"ComponentInterface"]," ",["span",{"class":"token punctuation"},"{"],"\n  ",["span",{"class":"token keyword"},"public"]," ",["span",{"class":"token function"},"render"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n    ",["span",{"class":"token keyword"},"return"]," ",["span",{"class":"token punctuation"},"("],"\n      ",["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"div"]," ",["span",{"class":"token attr-name"},"class"],["span",{"class":"token attr-value"},["span",{"class":"token punctuation"},"="],["span",{"class":"token punctuation"},"\""],"alert",["span",{"class":"token punctuation"},"\""]],["span",{"class":"token punctuation"},">"]],["span",{"class":"token plain-text"},"\n        Hello StencilJS!"],["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"span"]," ",["span",{"class":"token attr-name"},"class"],["span",{"class":"token attr-value"},["span",{"class":"token punctuation"},"="],["span",{"class":"token punctuation"},"\""],"close-btn",["span",{"class":"token punctuation"},"\""]],["span",{"class":"token punctuation"},">"]],["span",{"class":"token plain-text"},"&times;"],["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"</"],"span"],["span",{"class":"token punctuation"},">"]],["span",{"class":"token plain-text"},"\n      "],["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"</"],"div"],["span",{"class":"token punctuation"},">"]],"\n    ",["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},";"],"\n  ",["span",{"class":"token punctuation"},"}"],"\n",["span",{"class":"token punctuation"},"}"]]],"\n  "],"\n  ",["p",null,"Im ",["code",null,"@Component"],"-Decorator werden Metadaten definiert wie z.B. der Tag-Name unter dem Stencil die Komponente registrieren soll. In unserer Alert-Komponente ist das ",["code",null,"cb-alert"],". Wichtig ist, dass der Tag-Name nicht aus einem einzigen Wort besteht, sondern immer aus mindestens einem Bindestrich zusammengesetzt ist (siehe dazu auch die ",["a",{"href":"https://html.spec.whatwg.org/multipage/custom-elements.html","target":"_blank"},"Custom-Elements-Spezifikation"],"). Auch die Zuordnung von Styles wird im Decorator festgelegt."],"\n",["p",null,"In unserem Beispiel implementiert die Alert-Komponente das Interface ",["code",null,"ComponentInterface"],". Dies ist nicht zwingend notwendig, ermöglicht aber der IDE eine bessere Code-Vervollständigung und es lässt sich dadurch auch herausfinden, welche Methoden noch eine Komponente implementieren kann (z.B. Lifecycle-Methoden). Die wichtigste Methode ist jedoch ",["code",null,"render"],". In ",["code",null,"render"]," wird der eigentliche HTML-Content in Form von JSX definiert. Damit TypeScript JSX korrekt kompilieren kann, muss die ",["code",null,"h"],"-Funktion von Stencil importiert werden. Das ",["code",null,"h"]," steht hier für ",["code",null,"hyperscript"],", in das JSX umgewandelt wird. Die ",["code",null,"h"],"-Funktion ist das Äquivalent zu der ",["code",null,"createElement"],"-Funktion von React. Außerdem muss die Datei der Klassendefinition statt ",["code",null,".ts"]," die Endung ",["code",null,".tsx"]," haben."],"\n",["p",null,"Die Registrierung der Komponente im Browser übernimmt Stencil für uns. Somit kann einfach das neue Element der ",["code",null,"index.html"]," getestet werden:"],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-html"},["code",{"class":"language-html"},["span",{"class":"token doctype"},"<!DOCTYPE html>"],"\n",["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"html"]," ",["span",{"class":"token attr-name"},"dir"],["span",{"class":"token attr-value"},["span",{"class":"token punctuation"},"="],["span",{"class":"token punctuation"},"\""],"ltr",["span",{"class":"token punctuation"},"\""]]," ",["span",{"class":"token attr-name"},"lang"],["span",{"class":"token attr-value"},["span",{"class":"token punctuation"},"="],["span",{"class":"token punctuation"},"\""],"en",["span",{"class":"token punctuation"},"\""]],["span",{"class":"token punctuation"},">"]],"\n  ",["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"head"],["span",{"class":"token punctuation"},">"]],"\n    ",["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"meta"]," ",["span",{"class":"token attr-name"},"charset"],["span",{"class":"token attr-value"},["span",{"class":"token punctuation"},"="],["span",{"class":"token punctuation"},"\""],"utf-8",["span",{"class":"token punctuation"},"\""]]," ",["span",{"class":"token punctuation"},"/>"]],"\n    ",["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"meta"]," ",["span",{"class":"token attr-name"},"name"],["span",{"class":"token attr-value"},["span",{"class":"token punctuation"},"="],["span",{"class":"token punctuation"},"\""],"viewport",["span",{"class":"token punctuation"},"\""]]," ",["span",{"class":"token attr-name"},"content"],["span",{"class":"token attr-value"},["span",{"class":"token punctuation"},"="],["span",{"class":"token punctuation"},"\""],"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0",["span",{"class":"token punctuation"},"\""]]," ",["span",{"class":"token punctuation"},"/>"]],"\n    ",["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"title"],["span",{"class":"token punctuation"},">"]],"Stencil Component Starter",["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"</"],"title"],["span",{"class":"token punctuation"},">"]],"\n    ",["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"script"]," ",["span",{"class":"token attr-name"},"type"],["span",{"class":"token attr-value"},["span",{"class":"token punctuation"},"="],["span",{"class":"token punctuation"},"\""],"module",["span",{"class":"token punctuation"},"\""]]," ",["span",{"class":"token attr-name"},"src"],["span",{"class":"token attr-value"},["span",{"class":"token punctuation"},"="],["span",{"class":"token punctuation"},"\""],"/build/blog-post-stenciljs-introduction.esm.js",["span",{"class":"token punctuation"},"\""]],["span",{"class":"token punctuation"},">"]],["span",{"class":"token script"}],["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"</"],"script"],["span",{"class":"token punctuation"},">"]],"\n    ",["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"script"]," ",["span",{"class":"token attr-name"},"nomodule"]," ",["span",{"class":"token attr-name"},"src"],["span",{"class":"token attr-value"},["span",{"class":"token punctuation"},"="],["span",{"class":"token punctuation"},"\""],"/build/blog-post-stenciljs-introduction.js",["span",{"class":"token punctuation"},"\""]],["span",{"class":"token punctuation"},">"]],["span",{"class":"token script"}],["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"</"],"script"],["span",{"class":"token punctuation"},">"]],"\n  ",["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"</"],"head"],["span",{"class":"token punctuation"},">"]],"\n  ",["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"body"],["span",{"class":"token punctuation"},">"]],"\n    ",["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"cb-alert"],["span",{"class":"token punctuation"},">"]],["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"</"],"cb-alert"],["span",{"class":"token punctuation"},">"]],"\n  ",["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"</"],"body"],["span",{"class":"token punctuation"},">"]],"\n",["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"</"],"html"],["span",{"class":"token punctuation"},">"]]]],"\n  "],"\n  ",["h2",{"id":"properties"},"Properties"],"\n",["p",null,"Unsere aktuelle Alert-Komponente ist noch sehr statisch. Der Text des Alerts ist fest und eine Möglichkeit zum Ausblenden ist auch nicht gegeben. Beide Eigenschaften sollten von außen steuerbar sein. Dies lässt sich in StencilJS mit sogenannten Properties realisieren, die man dem HTML-Element in Form von Attributen übergeben kann:"],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-html"},["code",{"class":"language-html"},["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"cb-alert"]," ",["span",{"class":"token attr-name"},"message"],["span",{"class":"token attr-value"},["span",{"class":"token punctuation"},"="],["span",{"class":"token punctuation"},"\""],"Hello StencilJS!",["span",{"class":"token punctuation"},"\""]]," ",["span",{"class":"token attr-name"},"visible"],["span",{"class":"token attr-value"},["span",{"class":"token punctuation"},"="],["span",{"class":"token punctuation"},"\""],"true",["span",{"class":"token punctuation"},"\""]],["span",{"class":"token punctuation"},">"]],["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"</"],"cb-alert"],["span",{"class":"token punctuation"},">"]]]],"\n  "],"\n  ",["p",null,"Properties werden in der Komponenten-Klasse als Variablen mit dem ",["code",null,"@Prop"],"-Decorator festgelegt und können dann im JSX verwendet werden. Bei jeder Änderung einer Property wird die ",["code",null,"render"],"-Methode erneut aufgerufen."],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token punctuation"},"{"]," Component",["span",{"class":"token punctuation"},","]," ComponentInterface",["span",{"class":"token punctuation"},","]," h",["span",{"class":"token punctuation"},","]," Prop ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"'@stencil/core'"],["span",{"class":"token punctuation"},";"],"\n\n@",["span",{"class":"token function"},"Component"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},"{"],"\n  tag",["span",{"class":"token punctuation"},":"]," ",["span",{"class":"token string"},"'cb-alert'"],["span",{"class":"token punctuation"},","],"\n  styleUrl",["span",{"class":"token punctuation"},":"]," ",["span",{"class":"token string"},"'./alert.component.css'"],"\n",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},")"],"\n",["span",{"class":"token keyword"},"export"]," ",["span",{"class":"token keyword"},"class"]," ",["span",{"class":"token class-name"},"AlertComponent"]," ",["span",{"class":"token keyword"},"implements"]," ",["span",{"class":"token class-name"},"ComponentInterface"]," ",["span",{"class":"token punctuation"},"{"],"\n  @",["span",{"class":"token function"},"Prop"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token keyword"},"public"]," message",["span",{"class":"token punctuation"},":"]," ",["span",{"class":"token builtin"},"string"],["span",{"class":"token punctuation"},";"],"\n  @",["span",{"class":"token function"},"Prop"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token keyword"},"public"]," visible",["span",{"class":"token punctuation"},":"]," ",["span",{"class":"token builtin"},"boolean"]," ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token boolean"},"false"],["span",{"class":"token punctuation"},";"],"\n\n  ",["span",{"class":"token keyword"},"public"]," ",["span",{"class":"token function"},"render"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n    ",["span",{"class":"token keyword"},"return"]," ",["span",{"class":"token punctuation"},"("],"\n      ",["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"div"]," ",["span",{"class":"token attr-name"},"class"],["span",{"class":"token script language-javascript"},["span",{"class":"token script-punctuation punctuation"},"="],["span",{"class":"token punctuation"},"{"],["span",{"class":"token template-string"},["span",{"class":"token template-punctuation string"},"`"],["span",{"class":"token string"},"alert "],["span",{"class":"token interpolation"},["span",{"class":"token interpolation-punctuation punctuation"},"${"],["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],"visible ",["span",{"class":"token operator"},"?"]," ",["span",{"class":"token string"},"'visible'"]," ",["span",{"class":"token punctuation"},":"]," ",["span",{"class":"token string"},"''"],["span",{"class":"token interpolation-punctuation punctuation"},"}"]],["span",{"class":"token template-punctuation string"},"`"]],["span",{"class":"token punctuation"},"}"]],["span",{"class":"token punctuation"},">"]],["span",{"class":"token plain-text"},"\n        "],["span",{"class":"token punctuation"},"{"],["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],"message",["span",{"class":"token punctuation"},"}"],["span",{"class":"token plain-text"},"\n        "],["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"span"]," ",["span",{"class":"token attr-name"},"class"],["span",{"class":"token attr-value"},["span",{"class":"token punctuation"},"="],["span",{"class":"token punctuation"},"\""],"close-btn",["span",{"class":"token punctuation"},"\""]],["span",{"class":"token punctuation"},">"]],["span",{"class":"token plain-text"},"&times;"],["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"</"],"span"],["span",{"class":"token punctuation"},">"]],["span",{"class":"token plain-text"},"\n      "],["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"</"],"div"],["span",{"class":"token punctuation"},">"]],"\n    ",["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},";"],"\n  ",["span",{"class":"token punctuation"},"}"],"\n",["span",{"class":"token punctuation"},"}"]]],"\n  "],"\n  ",["h2",{"id":"events"},"Events"],"\n",["p",null,"Als Nächstes möchten wir die Möglichkeit schaffen von außen auf den Click des Close-Buttons zu reagieren. Dies lässt sich mit DOM-Events umsetzen. Ähnlich wie in Angular, werden Events mit Klassen-Variablen vom Typ ",["code",null,"EventEmitter"]," und einem Decorator realisiert. In Stencil heißt der Decorator ",["code",null,"@Event"]," statt Output. Das Instanziieren des EventEmitters übernimmt Stencil für uns und mit der ",["code",null,"emit"],"-Methode können wir das Event beim Click auf den Close-Button ausführen."],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token punctuation"},"{"]," Component",["span",{"class":"token punctuation"},","]," ComponentInterface",["span",{"class":"token punctuation"},","]," Event",["span",{"class":"token punctuation"},","]," EventEmitter",["span",{"class":"token punctuation"},","]," h",["span",{"class":"token punctuation"},","]," Prop ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"'@stencil/core'"],["span",{"class":"token punctuation"},";"],"\n\n@",["span",{"class":"token function"},"Component"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},"{"],"\n  tag",["span",{"class":"token punctuation"},":"]," ",["span",{"class":"token string"},"'cb-alert'"],["span",{"class":"token punctuation"},","],"\n  styleUrl",["span",{"class":"token punctuation"},":"]," ",["span",{"class":"token string"},"'./alert.component.css'"],"\n",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},")"],"\n",["span",{"class":"token keyword"},"export"]," ",["span",{"class":"token keyword"},"class"]," ",["span",{"class":"token class-name"},"AlertComponent"]," ",["span",{"class":"token keyword"},"implements"]," ",["span",{"class":"token class-name"},"ComponentInterface"]," ",["span",{"class":"token punctuation"},"{"],"\n  @",["span",{"class":"token function"},"Prop"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token keyword"},"public"]," message",["span",{"class":"token punctuation"},":"]," ",["span",{"class":"token builtin"},"string"],["span",{"class":"token punctuation"},";"],"\n  @",["span",{"class":"token function"},"Prop"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token keyword"},"public"]," visible",["span",{"class":"token punctuation"},":"]," ",["span",{"class":"token builtin"},"boolean"]," ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token boolean"},"false"],["span",{"class":"token punctuation"},";"],"\n\n  @",["span",{"class":"token function"},"Event"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token keyword"},"public"]," closeClicked",["span",{"class":"token punctuation"},":"]," EventEmitter",["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"void"],["span",{"class":"token punctuation"},">"]],["span",{"class":"token plain-text"},";\n\n  public render() "],["span",{"class":"token punctuation"},"{"],"\n    ",["span",{"class":"token keyword"},"return"]," ",["span",{"class":"token punctuation"},"("],"\n      ",["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"div"]," ",["span",{"class":"token attr-name"},"class"],["span",{"class":"token script language-javascript"},["span",{"class":"token script-punctuation punctuation"},"="],["span",{"class":"token punctuation"},"{"],["span",{"class":"token template-string"},["span",{"class":"token template-punctuation string"},"`"],["span",{"class":"token string"},"alert "],["span",{"class":"token interpolation"},["span",{"class":"token interpolation-punctuation punctuation"},"${"],["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],"visible ",["span",{"class":"token operator"},"?"]," ",["span",{"class":"token string"},"'visible'"]," ",["span",{"class":"token punctuation"},":"]," ",["span",{"class":"token string"},"''"],["span",{"class":"token interpolation-punctuation punctuation"},"}"]],["span",{"class":"token template-punctuation string"},"`"]],["span",{"class":"token punctuation"},"}"]],["span",{"class":"token punctuation"},">"]],["span",{"class":"token plain-text"},"\n        "],["span",{"class":"token punctuation"},"{"],["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],"message",["span",{"class":"token punctuation"},"}"],["span",{"class":"token plain-text"},"\n        "],["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"span"]," ",["span",{"class":"token attr-name"},"class"],["span",{"class":"token attr-value"},["span",{"class":"token punctuation"},"="],["span",{"class":"token punctuation"},"\""],"close-btn",["span",{"class":"token punctuation"},"\""]]," ",["span",{"class":"token attr-name"},"onClick"],["span",{"class":"token script language-javascript"},["span",{"class":"token script-punctuation punctuation"},"="],["span",{"class":"token punctuation"},"{"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token operator"},"=>"]," ",["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],"closeClicked",["span",{"class":"token punctuation"},"."],["span",{"class":"token function"},"emit"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},"}"]],["span",{"class":"token punctuation"},">"]],["span",{"class":"token plain-text"},"\n          &times;\n        "],["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"</"],"span"],["span",{"class":"token punctuation"},">"]],["span",{"class":"token plain-text"},"\n      "],["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"</"],"div"],["span",{"class":"token punctuation"},">"]],"\n    ",["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},";"],"\n  ",["span",{"class":"token punctuation"},"}"],["span",{"class":"token plain-text"},"\n}"]]],"\n  "],"\n  ",["p",null,"Jetzt haben wir die Möglichkeit von außen auf den Click zu reagieren. Um das besser zu veranschaulichen, erstellen wir eine Wrapper-Komponente, die auf das Event reagieren soll und uns eine Ausgabe auf der Konsole erzeugt. Stencil bietet uns zwei Möglichkeiten auf Events zu reagieren. Zum einen können wir direkt im JSX auf dem Element das Binding vornehmen. Hier ist darauf zu achten, dass wir das Event nur mit einem vorangestellten ",["code",null,"on"]," ansprechen können. In unserem Beispiel binden wir das Event also mit ",["code",null,"onCloseClicked"]," statt nur mit ",["code",null,"closeClicked"],":"],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token punctuation"},"{"]," Component",["span",{"class":"token punctuation"},","]," ComponentInterface",["span",{"class":"token punctuation"},","]," h ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"'@stencil/core'"],["span",{"class":"token punctuation"},";"],"\n\n@",["span",{"class":"token function"},"Component"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},"{"],"\n  tag",["span",{"class":"token punctuation"},":"]," ",["span",{"class":"token string"},"'cb-alert-wrapper'"],"\n",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},")"],"\n",["span",{"class":"token keyword"},"export"]," ",["span",{"class":"token keyword"},"class"]," ",["span",{"class":"token class-name"},"AlertWrapperComponent"]," ",["span",{"class":"token keyword"},"implements"]," ",["span",{"class":"token class-name"},"ComponentInterface"]," ",["span",{"class":"token punctuation"},"{"],"\n  ",["span",{"class":"token keyword"},"public"]," ",["span",{"class":"token function"},"render"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n    ",["span",{"class":"token keyword"},"return"]," ",["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"cb-alert"]," ",["span",{"class":"token attr-name"},"message"],["span",{"class":"token attr-value"},["span",{"class":"token punctuation"},"="],["span",{"class":"token punctuation"},"\""],"Hello StencilJS!",["span",{"class":"token punctuation"},"\""]]," ",["span",{"class":"token attr-name"},"visible"],["span",{"class":"token script language-javascript"},["span",{"class":"token script-punctuation punctuation"},"="],["span",{"class":"token punctuation"},"{"],["span",{"class":"token boolean"},"true"],["span",{"class":"token punctuation"},"}"]]," ",["span",{"class":"token attr-name"},"onCloseClicked"],["span",{"class":"token script language-javascript"},["span",{"class":"token script-punctuation punctuation"},"="],["span",{"class":"token punctuation"},"{"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token operator"},"=>"]," ",["span",{"class":"token builtin"},"console"],["span",{"class":"token punctuation"},"."],["span",{"class":"token function"},"log"],["span",{"class":"token punctuation"},"("],["span",{"class":"token string"},"'Close clicked!'"],["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},"}"]]," ",["span",{"class":"token punctuation"},"/>"]],["span",{"class":"token punctuation"},";"],"\n  ",["span",{"class":"token punctuation"},"}"],"\n",["span",{"class":"token punctuation"},"}"]]],"\n  "],"\n  ",["p",null,"Zum anderen können wir auch direkt in der Klasse mit einer Methode auf Events reagieren. Dazu muss die Methode mit dem ",["code",null,"@Listen"],"-Decorator versehen werden. Dem ",["code",null,"@Listen"],"-Decorator muss der Event-Name übergeben werden, hier diesmal ohne das vorangestellte ",["code",null,"on"],":"],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token punctuation"},"{"]," Component",["span",{"class":"token punctuation"},","]," ComponentInterface",["span",{"class":"token punctuation"},","]," h",["span",{"class":"token punctuation"},","]," Listen ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"'@stencil/core'"],["span",{"class":"token punctuation"},";"],"\n\n@",["span",{"class":"token function"},"Component"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},"{"],"\n  tag",["span",{"class":"token punctuation"},":"]," ",["span",{"class":"token string"},"'cb-alert-wrapper'"],"\n",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},")"],"\n",["span",{"class":"token keyword"},"export"]," ",["span",{"class":"token keyword"},"class"]," ",["span",{"class":"token class-name"},"AlertWrapperComponent"]," ",["span",{"class":"token keyword"},"implements"]," ",["span",{"class":"token class-name"},"ComponentInterface"]," ",["span",{"class":"token punctuation"},"{"],"\n  @",["span",{"class":"token function"},"Listen"],["span",{"class":"token punctuation"},"("],["span",{"class":"token string"},"'closeClicked'"],["span",{"class":"token punctuation"},")"],"\n  ",["span",{"class":"token keyword"},"public"]," ",["span",{"class":"token function"},"logCloseClicked"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n    ",["span",{"class":"token builtin"},"console"],["span",{"class":"token punctuation"},"."],["span",{"class":"token function"},"log"],["span",{"class":"token punctuation"},"("],["span",{"class":"token string"},"'Close clicked!'"],["span",{"class":"token punctuation"},")"],["span",{"class":"token punctuation"},";"],"\n  ",["span",{"class":"token punctuation"},"}"],"\n\n  ",["span",{"class":"token keyword"},"public"]," ",["span",{"class":"token function"},"render"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n    ",["span",{"class":"token keyword"},"return"]," ",["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"cb-alert"]," ",["span",{"class":"token attr-name"},"message"],["span",{"class":"token attr-value"},["span",{"class":"token punctuation"},"="],["span",{"class":"token punctuation"},"\""],"Hello StencilJS!",["span",{"class":"token punctuation"},"\""]]," ",["span",{"class":"token attr-name"},"visible"],["span",{"class":"token script language-javascript"},["span",{"class":"token script-punctuation punctuation"},"="],["span",{"class":"token punctuation"},"{"],["span",{"class":"token boolean"},"true"],["span",{"class":"token punctuation"},"}"]]," ",["span",{"class":"token punctuation"},"/>"]],["span",{"class":"token punctuation"},";"],"\n  ",["span",{"class":"token punctuation"},"}"],"\n",["span",{"class":"token punctuation"},"}"]]],"\n  "],"\n  ",["h2",{"id":"state"},"State"],"\n",["p",null,"Beim Clicken auf den Close-Button wollen wir jetzt die Alert-Komponente ausblenden. Dazu erstellen wir eine Klassen-Variable, die den Sichtbarkeitszustand verwaltet. Die Variable wird an dem ",["code",null,"visible"],"-Attribut des Alerts gebunden. Wenn jetzt beim Drücken des Buttons die Variable auf ",["code",null,"false"]," gesetzt wird, sollte unsere Komponente ausgeblendet werden. Dem ist aber nicht so, denn StencilJS löst das Rendering beim Auslösen eines Events nicht aus. Um das zu erreichen, muss die Variable mit dem ",["code",null,"@State"],"-Decorator gekennzeichnet werden. Durch den Decorator weiß Stencil, dass nach einer Wertänderung die ",["code",null,"render"],"-Methode ausgeführt werden muss."],"\n\n  ",["highlight-code",null,"\n    ",["pre",{"class":"language-tsx"},["code",{"class":"language-tsx"},["span",{"class":"token keyword"},"import"]," ",["span",{"class":"token punctuation"},"{"]," Component",["span",{"class":"token punctuation"},","]," ComponentInterface",["span",{"class":"token punctuation"},","]," h",["span",{"class":"token punctuation"},","]," Listen",["span",{"class":"token punctuation"},","]," State ",["span",{"class":"token punctuation"},"}"]," ",["span",{"class":"token keyword"},"from"]," ",["span",{"class":"token string"},"'@stencil/core'"],["span",{"class":"token punctuation"},";"],"\n\n@",["span",{"class":"token function"},"Component"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},"{"],"\n  tag",["span",{"class":"token punctuation"},":"]," ",["span",{"class":"token string"},"'cb-alert-wrapper'"],"\n",["span",{"class":"token punctuation"},"}"],["span",{"class":"token punctuation"},")"],"\n",["span",{"class":"token keyword"},"export"]," ",["span",{"class":"token keyword"},"class"]," ",["span",{"class":"token class-name"},"AlertWrapperComponent"]," ",["span",{"class":"token keyword"},"implements"]," ",["span",{"class":"token class-name"},"ComponentInterface"]," ",["span",{"class":"token punctuation"},"{"],"\n  @",["span",{"class":"token function"},"State"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token keyword"},"private"]," alertVisible ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token boolean"},"true"],["span",{"class":"token punctuation"},";"],"\n\n  @",["span",{"class":"token function"},"Listen"],["span",{"class":"token punctuation"},"("],["span",{"class":"token string"},"'closeClicked'"],["span",{"class":"token punctuation"},")"],"\n  ",["span",{"class":"token keyword"},"public"]," ",["span",{"class":"token function"},"hideAlert"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n    ",["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],"alertVisible ",["span",{"class":"token operator"},"="]," ",["span",{"class":"token boolean"},"false"],["span",{"class":"token punctuation"},";"],"\n  ",["span",{"class":"token punctuation"},"}"],"\n\n  ",["span",{"class":"token keyword"},"public"]," ",["span",{"class":"token function"},"render"],["span",{"class":"token punctuation"},"("],["span",{"class":"token punctuation"},")"]," ",["span",{"class":"token punctuation"},"{"],"\n    ",["span",{"class":"token keyword"},"return"]," ",["span",{"class":"token tag"},["span",{"class":"token tag"},["span",{"class":"token punctuation"},"<"],"cb-alert"]," ",["span",{"class":"token attr-name"},"message"],["span",{"class":"token attr-value"},["span",{"class":"token punctuation"},"="],["span",{"class":"token punctuation"},"\""],"Hello StencilJS!",["span",{"class":"token punctuation"},"\""]]," ",["span",{"class":"token attr-name"},"visible"],["span",{"class":"token script language-javascript"},["span",{"class":"token script-punctuation punctuation"},"="],["span",{"class":"token punctuation"},"{"],["span",{"class":"token keyword"},"this"],["span",{"class":"token punctuation"},"."],"alertVisible",["span",{"class":"token punctuation"},"}"]]," ",["span",{"class":"token punctuation"},"/>"]],["span",{"class":"token punctuation"},";"],"\n  ",["span",{"class":"token punctuation"},"}"],"\n",["span",{"class":"token punctuation"},"}"]]],"\n  "],"\n  ",["h2",{"id":"fazit"},"Fazit"],"\n",["p",null,"Diese kurze Einführung reißt nur einen kleinen Teil der Funktionalität von StencilJS an. Das Tool hat noch viel mehr zu bieten, unter anderem Support fürs Prerendering oder einen Store zum Verwalten von Shared State. Damit eignet sich Stencil nicht nur für Komponenten-Libraries, sondern auch zum Erstellen vollwertiger Apps. Entwickler, die Erfahrung mit Angular und/oder React haben, werden sich sehr schnell in Stencil zurechtfinden, denn Stencil vereinigt die besten Konzepte der beiden Frameworks."],"\n",["p",null,"Ich hoffe, meine kurze Einführung in StencilJS hat euch gefallen. Mir persönlich gefällt der Ansatz, wie man Web Components erstellt, sehr gut. Den Sourcecode für das Beispiel findet ihr auf GitHub."]]}